<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="744px" preserveAspectRatio="none" style="width:1284px;height:744px;" version="1.1" viewBox="0 0 1284 744" width="1284px" zoomAndPan="magnify"><defs/><g><!--cluster ex--><rect fill="#999999" height="171" style="stroke: #8A8A8A; stroke-width: 1.5;" width="423" x="14" y="22"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="125" x="163" y="37.5352">«external_system»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="189" x="131" y="55.957">Dependent Application</text><!--cluster Ephemeris--><rect fill="#FFFFFF" height="716.5" style="stroke: #444444; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;" width="828" x="445" y="16.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="80" x="819" y="32.0352">«boundary»</text><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="815.5" y="50.457">Ephemeris</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="832.5" y="65.4336">[System]</text><!--entity pub--><rect fill="#438DD5" height="116.5742" style="stroke: #3C7FC0; stroke-width: 1.5;" width="182" x="247" y="68"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="305.5" y="89.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="299" y="107.6016">Publisher</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="45" x="315.5" y="122.5781">[fsharp]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="340" y="138.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="158" x="257" y="155.1328">Publishes Commands /</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="316" y="171.6211">Events</text><!--entity cons--><rect fill="#438DD5" height="116.5742" style="stroke: #3C7FC0; stroke-width: 1.5;" width="189" x="22.5" y="68"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="84.5" y="89.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="75" y="107.6016">Consumer</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="45" x="94.5" y="122.5781">[fsharp]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="119" y="138.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="165" x="32.5" y="155.1328">Consumes Commands /</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="95" y="171.6211">Events</text><!--entity core--><rect fill="#438DD5" height="116.5742" style="stroke: #3C7FC0; stroke-width: 1.5;" width="215" x="730.5" y="338"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="805.5" y="359.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="37" x="819.5" y="377.6016">Core</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="814.5" y="392.5781">[Fsharp]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="840" y="408.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="191" x="740.5" y="425.1328">Maintains Internal State and</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="797" y="441.6211">Consistency</text><!--entity buffer--><rect fill="#438DD5" height="100.0859" style="stroke: #3C7FC0; stroke-width: 1.5;" width="184" x="694" y="76.5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="753.5" y="98.1016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="760.5" y="116.1016">Buffer</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="45" x="763.5" y="131.0781">[fsharp]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="788" y="147.1445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="164" x="704" y="163.6328">Buffers Incoming Events</text><!--entity sync--><rect fill="#438DD5" height="100.0859" style="stroke: #3C7FC0; stroke-width: 1.5;" width="190" x="453" y="616.5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="515.5" y="638.1016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="494" y="656.1016">Sync Listener</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="45" x="525.5" y="671.0781">[fsharp]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="550" y="687.1445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="170" x="463" y="703.6328">Publishes messages sync</text><!--entity batch--><rect fill="#438DD5" height="116.5742" style="stroke: #3C7FC0; stroke-width: 1.5;" width="177" x="678.5" y="608"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="734.5" y="629.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="709.5" y="647.6016">Batch Listener</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="45" x="744.5" y="662.5781">[fsharp]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="769" y="678.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153" x="688.5" y="695.1328">Publishes messages in</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="740.5" y="711.6211">batches</text><!--entity redis--><path d="M963.5,622 C963.5,612 1049,612 1049,612 C1049,612 1134.5,612 1134.5,622 L1134.5,711.0859 C1134.5,721.0859 1049,721.0859 1049,721.0859 C1049,721.0859 963.5,721.0859 963.5,711.0859 L963.5,622 " fill="#438DD5" style="stroke: #3C7FC0; stroke-width: 1.5;"/><path d="M963.5,622 C963.5,632 1049,632 1049,632 C1049,632 1134.5,632 1134.5,622 " fill="none" style="stroke: #3C7FC0; stroke-width: 1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="1016.5" y="647.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="1026.5" y="665.6016">Redis</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="40" x="1029" y="680.5781">[Redis]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="1051" y="696.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="973.5" y="713.1328">Persists Queues / Sets</text><!--link cons to sync--><path d="M130.808,185.3052 C135.2281,208.8567 139,236.3285 139,261.5 C139,261.5 139,261.5 139,531.5 C139,596.3563 326.7995,635.3045 447.8855,653.6763 " fill="none" id="cons-sync" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="452.8816,654.4284,444.5775,649.133,447.9373,653.684,443.3864,657.0439,452.8816,654.4284" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="167" y="394.5684">Consumes</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="124" x="140" y="408.9121">[Commands / Events]</text><!--link cons to batch--><path d="M211.7992,182.6341 C217.9446,186.1662 224.0511,189.6467 230,193 C285.8673,224.491 357,197.3686 357,261.5 C357,261.5 357,261.5 357,531.5 C357,670.8234 531.3794,556.9167 661,608 C665.2365,609.6696 669.5151,611.4756 673.7983,613.3829 " fill="none" id="cons-batch" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="678.4461,615.4906,671.9015,608.1307,673.8924,613.4256,668.5975,615.4166,678.4461,615.4906" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="379" y="387.5684">Consumes</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="387" y="401.9121">[Batched</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="112" x="358" y="416.0449">Commands/Events]</text><!--link pub to buffer--><path d="M429.1995,126.5 C504.6772,126.5 611.6385,126.5 688.7403,126.5 " fill="none" id="pub-buffer" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="693.7751,126.5,684.7751,122.5,688.7751,126.5,684.7751,130.5,693.7751,126.5" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="550.5" y="106.0684">Put</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="124" x="499.5" y="120.4121">[Commands / Events]</text><!--link core to redis--><path d="M862.8343,455.0956 C876.5966,484.1901 895.3105,519.0084 917,547 C933.9334,568.8536 955.1454,590.0225 975.5799,608.318 " fill="none" id="core-redis" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="979.3853,611.7002,975.3158,602.7314,975.6482,608.3785,970.0011,608.7108,979.3853,611.7002" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="950.5" y="529.5684">Put</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="87" x="918" y="543.9121">[m -&gt; Queues]</text><!--link core to redis--><path d="M945.6335,453.804 C969.7602,470.9991 993.1622,491.8355 1010,516 C1028.5256,542.5868 1038.2527,577.3361 1043.3594,606.7449 " fill="none" id="core-redis" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1044.2001,611.7927,1046.6669,602.2578,1043.3785,606.8607,1038.7757,603.5723,1044.2001,611.7927" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="1046.5" y="529.5684">Put</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="61" x="1027" y="543.9121">[m -&gt; Set]</text><!--link redis to core--><path d="M1088.1657,611.6465 C1104.3783,581.7267 1115.5518,544.9909 1097,516 C1064.5479,465.2871 1004.5021,435.7902 950.3922,418.7957 " fill="none" id="redis-core" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="945.5101,417.2909,952.9325,423.7646,950.2882,418.7638,955.2891,416.1195,945.5101,417.2909" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1124.5" y="529.5684">Access</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="81" x="1107" y="543.9121">[Queue -&gt; m]</text><!--link core to sync--><path d="M730.3556,418.5721 C674.2765,435.7013 609.5359,465.3936 571,516 C550.5644,542.8366 544.7876,580.3172 544.1331,611.1605 " fill="none" id="core-sync" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="544.069,616.4434,548.1777,607.4925,544.1296,611.4438,540.1783,607.3956,544.069,616.4434" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="610" y="529.5684">Projects</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="129" x="572" y="543.9121">[View of Internal State]</text><!--link core to batch--><path d="M759.5368,455.0658 C741.9063,472.5295 725.5922,493.1773 716,516 C704.1776,544.1292 712.0901,576.0445 724.8918,603.2238 " fill="none" id="core-batch" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="727.1598,607.8917,726.8244,598.0486,724.9747,603.3945,719.6288,601.5448,727.1598,607.8917" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="755" y="529.5684">Projects</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="129" x="717" y="543.9121">[View of Internal State]</text><!--link buffer to core--><path d="M795.6589,176.6522 C804.1322,220.6477 816.4993,284.8617 825.6822,332.542 " fill="none" id="buffer-core" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="826.6729,337.6864,828.8987,328.0923,825.7273,332.7766,821.043,329.6053,826.6729,337.6864" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="863.5" y="259.5684">Stream</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="144" x="815" y="273.9121">[Buffer Command Intake]</text><!--
@startuml SystemDiagram





skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam rectangle {
    StereotypeFontSize 12
    shadowing false
}

skinparam database {
    StereotypeFontSize 12
    shadowing false
}

skinparam Arrow {
    Color #666666
    FontColor #666666
    FontSize 12
}

skinparam rectangle<<boundary>> {
    Shadowing false
    StereotypeFontSize 0
    FontColor #444444
    BorderColor #444444
    BorderStyle dashed
}






















skinparam rectangle<<person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #08427B
    BorderColor #073B6F
}

skinparam rectangle<<external_person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #686868
    BorderColor #8A8A8A
}

skinparam rectangle<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam rectangle<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}

skinparam database<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam database<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}
















skinparam rectangle<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}

skinparam database<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}










rectangle "==Dependent Application" <<external_system>> as ex {
    rectangle "==Publisher\n//<size:12>[fsharp]</size>//\n\n Publishes Commands / Events" <<container>> as pub
    rectangle "==Consumer\n//<size:12>[fsharp]</size>//\n\n Consumes Commands / Events" <<container>> as cons
}

rectangle "==Ephemeris\n<size:12>[System]</size>" <<boundary>> as Ephemeris {
    rectangle "==Core\n//<size:12>[Fsharp]</size>//\n\n Maintains Internal State and Consistency" <<container>> as core
    rectangle "==Buffer\n//<size:12>[fsharp]</size>//\n\n Buffers Incoming Events" <<container>> as buffer
    rectangle "==Sync Listener\n//<size:12>[fsharp]</size>//\n\n Publishes messages sync" <<container>> as sync
    rectangle "==Batch Listener\n//<size:12>[fsharp]</size>//\n\n Publishes messages in batches" <<container>> as batch
    database "==Redis\n//<size:12>[Redis]</size>//\n\n Persists Queues / Sets" <<container>> as redis
}

cons - -> sync : "===Consumes\n//<size:12>[Commands / Events]</size>//"
cons - -> batch : "===Consumes\n//<size:12>[Batched Commands/Events]</size>//"
pub -> buffer : "===Put\n//<size:12>[Commands / Events]</size>//"
core - -> redis : "===Put\n//<size:12>[m -> Queues]</size>//"
core - -> redis : "===Put\n//<size:12>[m -> Set]</size>//"
redis - -> core : "===Access\n//<size:12>[Queue -> m]</size>//"
core - -> sync : "===Projects\n//<size:12>[View of Internal State]</size>//"
core - -> batch : "===Projects\n//<size:12>[View of Internal State]</size>//"

buffer - -> core : "===Stream\n//<size:12>[Buffer Command Intake]</size>//"

@enduml

PlantUML version 1.2019.03(Sun Mar 10 21:04:44 AEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 12.0.1+12
Operating System: Mac OS X
OS Version: 10.14.4
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>