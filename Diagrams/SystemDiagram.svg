<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="890px" preserveAspectRatio="none" style="width:1082px;height:890px;" version="1.1" viewBox="0 0 1082 890" width="1082px" zoomAndPan="magnify"><defs/><g><!--cluster ex--><rect fill="#999999" height="171" style="stroke: #8A8A8A; stroke-width: 1.5;" width="423" x="14" y="22"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="125" x="163" y="37.5352">«external_system»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="189" x="131" y="55.957">Dependent Application</text><!--cluster Ephemeris--><rect fill="#FFFFFF" height="862.5" style="stroke: #444444; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;" width="419" x="445" y="16.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="80" x="614.5" y="32.0352">«boundary»</text><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="611" y="50.457">Ephemeris</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="628" y="65.4336">[System]</text><!--cluster storage--><rect fill="#FFFFFF" height="177" style="stroke: #444444; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;" width="188" x="883" y="524"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="80" x="937" y="539.5352">«boundary»</text><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="946.5" y="557.957">Storage</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="950.5" y="572.9336">[System]</text><!--entity pub--><rect fill="#438DD5" height="116.5742" style="stroke: #3C7FC0; stroke-width: 1.5;" width="182" x="247" y="68"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="305.5" y="89.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="299" y="107.6016">Publisher</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="45" x="315.5" y="122.5781">[fsharp]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="340" y="138.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="158" x="257" y="155.1328">Publishes Commands /</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="316" y="171.6211">Events</text><!--entity cons--><rect fill="#438DD5" height="116.5742" style="stroke: #3C7FC0; stroke-width: 1.5;" width="189" x="22.5" y="68"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="84.5" y="89.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="75" y="107.6016">Consumer</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="45" x="94.5" y="122.5781">[fsharp]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="119" y="138.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="165" x="32.5" y="155.1328">Consumes Commands /</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="95" y="171.6211">Events</text><!--entity core--><rect fill="#438DD5" height="116.5742" style="stroke: #3C7FC0; stroke-width: 1.5;" width="215" x="603.5" y="338"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="678.5" y="359.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="37" x="692.5" y="377.6016">Core</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="687.5" y="392.5781">[Fsharp]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="713" y="408.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="191" x="613.5" y="425.1328">Maintains Internal State and</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="670" y="441.6211">Consistency</text><!--entity buffer--><rect fill="#438DD5" height="100.0859" style="stroke: #3C7FC0; stroke-width: 1.5;" width="184" x="604" y="76.5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="663.5" y="98.1016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="670.5" y="116.1016">Buffer</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="45" x="673.5" y="131.0781">[fsharp]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="698" y="147.1445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="164" x="614" y="163.6328">Buffers Incoming Events</text><!--entity sync--><rect fill="#438DD5" height="100.0859" style="stroke: #3C7FC0; stroke-width: 1.5;" width="190" x="453" y="762.5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="515.5" y="784.1016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="494" y="802.1016">Sync Listener</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="45" x="525.5" y="817.0781">[fsharp]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="550" y="833.1445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="170" x="463" y="849.6328">Publishes messages sync</text><!--entity batch--><rect fill="#438DD5" height="116.5742" style="stroke: #3C7FC0; stroke-width: 1.5;" width="177" x="678.5" y="754"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="734.5" y="775.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="709.5" y="793.6016">Batch Listener</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="45" x="744.5" y="808.5781">[fsharp]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="769" y="824.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153" x="688.5" y="841.1328">Publishes messages in</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="740.5" y="857.6211">batches</text><!--entity redis--><path d="M891.5,594 C891.5,584 977,584 977,584 C977,584 1062.5,584 1062.5,594 L1062.5,683.0859 C1062.5,693.0859 977,693.0859 977,693.0859 C977,693.0859 891.5,693.0859 891.5,683.0859 L891.5,594 " fill="#438DD5" style="stroke: #3C7FC0; stroke-width: 1.5;"/><path d="M891.5,594 C891.5,604 977,604 977,604 C977,604 1062.5,604 1062.5,594 " fill="none" style="stroke: #3C7FC0; stroke-width: 1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="944.5" y="619.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="954.5" y="637.6016">Redis</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="40" x="957" y="652.5781">[Redis]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="979" y="668.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="901.5" y="685.1328">Persists Queues / Sets</text><!--link cons to sync--><path d="M136.5448,185.3096 C142.7351,208.7427 148,236.1299 148,261.5 C148,261.5 148,261.5 148,638.5 C148,703.8114 329.5843,760.1027 448.0622,789.88 " fill="none" id="cons-sync" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="452.952,791.103,445.1914,785.0389,448.1014,789.8899,443.2504,792.7998,452.952,791.103" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="176" y="394.5684">Consumes</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="124" x="149" y="408.9121">[Commands / Events]</text><!--link cons to batch--><path d="M211.5952,183.0076 C217.7905,186.4482 223.9638,189.8065 230,193 C293,226.331 375,190.2262 375,261.5 C375,261.5 375,261.5 375,638.5 C375,775.5852 537.2097,695.1077 661,754 C665.1817,755.9894 669.4287,758.0697 673.6988,760.2104 " fill="none" id="cons-batch" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="678.3394,762.5557,672.1111,754.9263,673.8769,760.3005,668.5027,762.0663,678.3394,762.5557" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="397" y="387.5684">Consumes</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="405" y="401.9121">[Batched</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="112" x="376" y="416.0449">Commands/Events]</text><!--link pub to buffer--><path d="M429.2648,126.5 C481.1425,126.5 546.0823,126.5 598.8964,126.5 " fill="none" id="pub-buffer" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="603.9687,126.5,594.9687,122.5,598.9687,126.5,594.9687,130.5,603.9687,126.5" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="505.5" y="106.0684">Put</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="124" x="454.5" y="120.4121">[Commands / Events]</text><!--link core to redis--><path d="M790.0452,455.0566 C816.8249,475.9402 846.4152,500.2023 872,524 C890.5439,541.2486 909.6106,561.2483 926.3217,579.6603 " fill="none" id="core-redis" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="930.0716,583.8087,927.0037,574.4498,926.7187,580.0995,921.069,579.8145,930.0716,583.8087" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="913.5" y="498.5684">Uses</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="139" x="860" y="512.9121">[Fetch, Store Queue/Set]</text><!--link core to sync--><path d="M635.6247,455.1541 C615.3114,474.8238 595.5189,498.3492 583,524 C546.5167,598.7534 542.5082,696.8768 544.2779,757.2661 " fill="none" id="core-sync" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="544.4403,762.2683,548.1461,753.1432,544.278,757.2709,540.1503,753.4029,544.4403,762.2683" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="622" y="636.5684">Projects</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="129" x="584" y="650.9121">[View of Internal State]</text><!--link core to batch--><path d="M715.6777,455.0933 C720.9759,516.567 730.6427,615.8998 744,701 C746.4369,716.5256 749.5788,733.163 752.7526,748.724 " fill="none" id="core-batch" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="753.8292,753.9568,755.9332,744.3353,752.8215,749.0594,748.0974,745.9476,753.8292,753.9568" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="783" y="636.5684">Projects</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="129" x="745" y="650.9121">[View of Internal State]</text><!--link buffer to core--><path d="M698.7862,176.6522 C701.2304,220.6477 704.7979,284.8617 707.4468,332.542 " fill="none" id="buffer-core" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="707.7326,337.6864,711.2271,328.4783,707.4552,332.6941,703.2394,328.9222,707.7326,337.6864" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="753.5" y="259.5684">Stream</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="144" x="705" y="273.9121">[Buffer Command Intake]</text><!--
@startuml SystemDiagram





skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam rectangle {
    StereotypeFontSize 12
    shadowing false
}

skinparam database {
    StereotypeFontSize 12
    shadowing false
}

skinparam Arrow {
    Color #666666
    FontColor #666666
    FontSize 12
}

skinparam rectangle<<boundary>> {
    Shadowing false
    StereotypeFontSize 0
    FontColor #444444
    BorderColor #444444
    BorderStyle dashed
}






















skinparam rectangle<<person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #08427B
    BorderColor #073B6F
}

skinparam rectangle<<external_person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #686868
    BorderColor #8A8A8A
}

skinparam rectangle<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam rectangle<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}

skinparam database<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam database<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}
















skinparam rectangle<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}

skinparam database<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}









top to bottom direction

rectangle "==Dependent Application" <<external_system>> as ex {
    rectangle "==Publisher\n//<size:12>[fsharp]</size>//\n\n Publishes Commands / Events" <<container>> as pub
    rectangle "==Consumer\n//<size:12>[fsharp]</size>//\n\n Consumes Commands / Events" <<container>> as cons
}

rectangle "==Ephemeris\n<size:12>[System]</size>" <<boundary>> as Ephemeris {
    rectangle "==Core\n//<size:12>[Fsharp]</size>//\n\n Maintains Internal State and Consistency" <<container>> as core
    rectangle "==Buffer\n//<size:12>[fsharp]</size>//\n\n Buffers Incoming Events" <<container>> as buffer
    rectangle "==Sync Listener\n//<size:12>[fsharp]</size>//\n\n Publishes messages sync" <<container>> as sync
    rectangle "==Batch Listener\n//<size:12>[fsharp]</size>//\n\n Publishes messages in batches" <<container>> as batch
}
rectangle "==Storage\n<size:12>[System]</size>" <<boundary>> as storage {
    database "==Redis\n//<size:12>[Redis]</size>//\n\n Persists Queues / Sets" <<container>> as redis
}

cons - -> sync : "===Consumes\n//<size:12>[Commands / Events]</size>//"
cons - -> batch : "===Consumes\n//<size:12>[Batched Commands/Events]</size>//"
pub -> buffer : "===Put\n//<size:12>[Commands / Events]</size>//"
core - -> redis : "===Uses\n//<size:12>[Fetch, Store Queue/Set]</size>//"
core - -> sync : "===Projects\n//<size:12>[View of Internal State]</size>//"
core - -> batch : "===Projects\n//<size:12>[View of Internal State]</size>//"

buffer - -> core : "===Stream\n//<size:12>[Buffer Command Intake]</size>//"

@enduml

PlantUML version 1.2019.03(Sun Mar 10 21:04:44 AEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 12.0.1+12
Operating System: Mac OS X
OS Version: 10.14.4
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>